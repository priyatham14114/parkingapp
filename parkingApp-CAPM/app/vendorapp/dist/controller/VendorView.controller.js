sap.ui.define(["./baseController","sap/ui/core/Fragment","sap/m/MessageToast","sap/m/MessageBox","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(e,t,r,i,a,s){"use strict";return e.extend("com.app.vendorapp.controller.VendorView",{onInit:async function(){if(!this.oReserve){this.oReserve=await this.loadFragment("reserveSlot")}this.oReserve.open();const e=new JSONModel({driverName:"",driverMobile:"",vehicleNumber:"",deliveryType:"",vendorName:""});this.getView().setModel(e,"newReserveModel")},onCloseDialog:function(){if(this.oReserve.isOpen()){this.oReserve.close()}},onBookPress:async function(){if(!this.oReserve){this.oReserve=await this.loadFragment("reserveSlot")}this.oReserve.open()},onBookSlotPress:function(){debugger;const e=this.getView().getModel(),t=this.getView(),d=this;var n=this.getView().byId("idkdjgbrrddrivername").getValue();var o=this.getView().byId("iddrivrtmobilwInput").getValue();var l=this.getView().byId("idameInput").getValue();var u=this.getView().byId("idvendordadNameInput").getValue();const v={driverName:n,driverMobile:o,vehicleNumber:l,vendorName:u};const b=e.bindList("/reservations");var m=true;if(!n||n.length<3){t.byId("idkdjgbrrddrivername").setValueState("Error");t.byId("idkdjgbrrddrivername").setValueStateText("Name Must Contain 3 Characters");m=false}else{t.byId("idkdjgbrrddrivername").setValueState("None")}if(!o||o.length!==10||!/^\d+$/.test(o)){t.byId("iddrivrtmobilwInput").setValueState("Error");t.byId("iddrivrtmobilwInput").setValueStateText("Mobile number must be a 10-digit numeric value");m=false}else{t.byId("iddrivrtmobilwInput").setValueState("None")}if(!l||!/^[A-Za-z]{2}\d{2}[A-Za-z]{2}\d{4}$/.test(l)){t.byId("idameInput").setValueState("Error");t.byId("idameInput").setValueStateText("Vehicle number should follow this pattern AP12BG1234");m=false}else{t.byId("idameInput").setValueState("None")}if(!u||u.length<3){t.byId("idvendordadNameInput").setValueState("Error");t.byId("idvendordadNameInput").setValueStateText("Vendor Name Must Contain 3 Characters");m=false}else{t.byId("idvendordadNameInput").setValueState("None")}if(!m){r.show("Please enter correct data");return}var I=e.bindList("/reserved");I.filter([new a("vehicleNumber",s.EQ,l)]);I.requestContexts().then(function(e){if(e.length>0){i.warning("You can not reserve.vehicle number "+oVehicleNumber+" already reserved")}else{const e=b.create(v);if(e){d.getView().byId("idkdjgbrrddrivername").setValue("");d.getView().byId("iddrivrtmobilwInput").setValue("");d.getView().byId("idameInput").setValue("");d.getView().byId("idvendordadNameInput").setValue("");i.success("Reservation Sent.Slot allotment will be sent to your mobile number")}}})}})});
//# sourceMappingURL=VendorView.controller.js.map